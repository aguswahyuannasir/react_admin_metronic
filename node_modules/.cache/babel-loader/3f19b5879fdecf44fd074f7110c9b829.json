{"ast":null,"code":"/* Javascript plotting library for jQuery, version 0.8.3.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\n*/\n(function ($) {\n  var options = {\n    crosshair: {\n      mode: null,\n      color: \"rgba(170, 0, 0, 0.80)\",\n      lineWidth: 1\n    }\n  };\n\n  function init(plot) {\n    var crosshair = {\n      x: -1,\n      y: -1,\n      locked: false\n    };\n\n    plot.setCrosshair = function setCrosshair(pos) {\n      if (!pos) crosshair.x = -1;else {\n        var o = plot.p2c(pos);\n        crosshair.x = Math.max(0, Math.min(o.left, plot.width()));\n        crosshair.y = Math.max(0, Math.min(o.top, plot.height()));\n      }\n      plot.triggerRedrawOverlay();\n    };\n\n    plot.clearCrosshair = plot.setCrosshair;\n\n    plot.lockCrosshair = function lockCrosshair(pos) {\n      if (pos) plot.setCrosshair(pos);\n      crosshair.locked = true;\n    };\n\n    plot.unlockCrosshair = function unlockCrosshair() {\n      crosshair.locked = false;\n    };\n\n    function onMouseOut(e) {\n      if (crosshair.locked) return;\n\n      if (crosshair.x != -1) {\n        crosshair.x = -1;\n        plot.triggerRedrawOverlay();\n      }\n    }\n\n    function onMouseMove(e) {\n      if (crosshair.locked) return;\n\n      if (plot.getSelection && plot.getSelection()) {\n        crosshair.x = -1;\n        return;\n      }\n\n      var offset = plot.offset();\n      crosshair.x = Math.max(0, Math.min(e.pageX - offset.left, plot.width()));\n      crosshair.y = Math.max(0, Math.min(e.pageY - offset.top, plot.height()));\n      plot.triggerRedrawOverlay();\n    }\n\n    plot.hooks.bindEvents.push(function (plot, eventHolder) {\n      if (!plot.getOptions().crosshair.mode) return;\n      eventHolder.mouseout(onMouseOut);\n      eventHolder.mousemove(onMouseMove);\n    });\n    plot.hooks.drawOverlay.push(function (plot, ctx) {\n      var c = plot.getOptions().crosshair;\n      if (!c.mode) return;\n      var plotOffset = plot.getPlotOffset();\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      if (crosshair.x != -1) {\n        var adj = plot.getOptions().crosshair.lineWidth % 2 ? .5 : 0;\n        ctx.strokeStyle = c.color;\n        ctx.lineWidth = c.lineWidth;\n        ctx.lineJoin = \"round\";\n        ctx.beginPath();\n\n        if (c.mode.indexOf(\"x\") != -1) {\n          var drawX = Math.floor(crosshair.x) + adj;\n          ctx.moveTo(drawX, 0);\n          ctx.lineTo(drawX, plot.height());\n        }\n\n        if (c.mode.indexOf(\"y\") != -1) {\n          var drawY = Math.floor(crosshair.y) + adj;\n          ctx.moveTo(0, drawY);\n          ctx.lineTo(plot.width(), drawY);\n        }\n\n        ctx.stroke();\n      }\n\n      ctx.restore();\n    });\n    plot.hooks.shutdown.push(function (plot, eventHolder) {\n      eventHolder.unbind(\"mouseout\", onMouseOut);\n      eventHolder.unbind(\"mousemove\", onMouseMove);\n    });\n  }\n\n  $.plot.plugins.push({\n    init: init,\n    options: options,\n    name: \"crosshair\",\n    version: \"1.0\"\n  });\n})(jQuery);","map":null,"metadata":{},"sourceType":"script"}